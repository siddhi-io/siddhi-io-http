{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Siddhi IO HTTP The siddhi-io-http extension is an extension to Siddhi that receives and publishes events via HTTP and HTTPS transports, calls external services, and serves incoming requests and provide synchronous responses. For information on Siddhi and it's features refer Siddhi Documentation . Download Versions 2.x and above with group id io.siddhi.extension.* from here . Versions 1.x and lower with group id org.wso2.extension.siddhi.* from here . Latest API Docs Latest API Docs is 2.0.8 . Features http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Dependencies There are no other dependencies needed for this extension. Installation For installing this extension on various siddhi execution environments refer Siddhi documentation section on adding extensions . Support and Contribution We encourage users to ask questions and get support via StackOverflow , make sure to add the siddhi tag to the issue for better response. If you find any issues related to the extension please report them on the issue tracker . For production support and other contribution related information refer Siddhi Community documentation.","title":"Information"},{"location":"#siddhi-io-http","text":"The siddhi-io-http extension is an extension to Siddhi that receives and publishes events via HTTP and HTTPS transports, calls external services, and serves incoming requests and provide synchronous responses. For information on Siddhi and it's features refer Siddhi Documentation .","title":"Siddhi IO HTTP"},{"location":"#download","text":"Versions 2.x and above with group id io.siddhi.extension.* from here . Versions 1.x and lower with group id org.wso2.extension.siddhi.* from here .","title":"Download"},{"location":"#latest-api-docs","text":"Latest API Docs is 2.0.8 .","title":"Latest API Docs"},{"location":"#features","text":"http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code'","title":"Features"},{"location":"#dependencies","text":"There are no other dependencies needed for this extension.","title":"Dependencies"},{"location":"#installation","text":"For installing this extension on various siddhi execution environments refer Siddhi documentation section on adding extensions .","title":"Installation"},{"location":"#support-and-contribution","text":"We encourage users to ask questions and get support via StackOverflow , make sure to add the siddhi tag to the issue for better response. If you find any issues related to the extension please report them on the issue tracker . For production support and other contribution related information refer Siddhi Community documentation.","title":"Support and Contribution"},{"location":"license/","text":"Copyright (c) 2019 WSO2 Inc. ( http://www.wso2.org ) All Rights Reserved. WSO2 Inc. licenses this file to you under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. ------------------------------------------------------------------------- Apache License Version 2.0, January 2004 http://www.apache.org/licenses/ TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION 1. Definitions. \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document. \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License. \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity. \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License. \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files. \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types. \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below). \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof. \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\" \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work. 2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form. 3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed. 4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions: (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and (b) You must cause any modified files to carry prominent notices stating that You changed the files; and (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License. You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License. 5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions. 6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file. 7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License. 8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages. 9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability. END OF TERMS AND CONDITIONS","title":"License"},{"location":"api/1.0.10/","text":"API Docs - v1.0.10 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.10"},{"location":"api/1.0.10/#api-docs-v1010","text":"","title":"API Docs - v1.0.10"},{"location":"api/1.0.10/#sink","text":"","title":"Sink"},{"location":"api/1.0.10/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.10/#source","text":"","title":"Source"},{"location":"api/1.0.10/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.11/","text":"API Docs - v1.0.11 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.11"},{"location":"api/1.0.11/#api-docs-v1011","text":"","title":"API Docs - v1.0.11"},{"location":"api/1.0.11/#sink","text":"","title":"Sink"},{"location":"api/1.0.11/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.11/#source","text":"","title":"Source"},{"location":"api/1.0.11/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.12/","text":"API Docs - v1.0.12 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.12"},{"location":"api/1.0.12/#api-docs-v1012","text":"","title":"API Docs - v1.0.12"},{"location":"api/1.0.12/#sink","text":"","title":"Sink"},{"location":"api/1.0.12/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.12/#source","text":"","title":"Source"},{"location":"api/1.0.12/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.13/","text":"API Docs - v1.0.13 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.13"},{"location":"api/1.0.13/#api-docs-v1013","text":"","title":"API Docs - v1.0.13"},{"location":"api/1.0.13/#sink","text":"","title":"Sink"},{"location":"api/1.0.13/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.13/#source","text":"","title":"Source"},{"location":"api/1.0.13/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.14/","text":"API Docs - v1.0.14 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.14"},{"location":"api/1.0.14/#api-docs-v1014","text":"","title":"API Docs - v1.0.14"},{"location":"api/1.0.14/#sink","text":"","title":"Sink"},{"location":"api/1.0.14/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.14/#source","text":"","title":"Source"},{"location":"api/1.0.14/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.15/","text":"API Docs - v1.0.15 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.15"},{"location":"api/1.0.15/#api-docs-v1015","text":"","title":"API Docs - v1.0.15"},{"location":"api/1.0.15/#sink","text":"","title":"Sink"},{"location":"api/1.0.15/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.15/#source","text":"","title":"Source"},{"location":"api/1.0.15/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.16/","text":"API Docs - v1.0.16 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.16"},{"location":"api/1.0.16/#api-docs-v1016","text":"","title":"API Docs - v1.0.16"},{"location":"api/1.0.16/#sink","text":"","title":"Sink"},{"location":"api/1.0.16/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.16/#source","text":"","title":"Source"},{"location":"api/1.0.16/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.17/","text":"API Docs - v1.0.17 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.17"},{"location":"api/1.0.17/#api-docs-v1017","text":"","title":"API Docs - v1.0.17"},{"location":"api/1.0.17/#sink","text":"","title":"Sink"},{"location":"api/1.0.17/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}',client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.17/#source","text":"","title":"Source"},{"location":"api/1.0.17/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.18/","text":"API Docs - v1.0.18 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.18"},{"location":"api/1.0.18/#api-docs-v1018","text":"","title":"API Docs - v1.0.18"},{"location":"api/1.0.18/#sink","text":"","title":"Sink"},{"location":"api/1.0.18/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.18/#source","text":"","title":"Source"},{"location":"api/1.0.18/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.19/","text":"API Docs - v1.0.19 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.19"},{"location":"api/1.0.19/#api-docs-v1019","text":"","title":"API Docs - v1.0.19"},{"location":"api/1.0.19/#sink","text":"","title":"Sink"},{"location":"api/1.0.19/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.19/#source","text":"","title":"Source"},{"location":"api/1.0.19/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.20/","text":"API Docs - v1.0.20 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.20"},{"location":"api/1.0.20/#api-docs-v1020","text":"","title":"API Docs - v1.0.20"},{"location":"api/1.0.20/#sink","text":"","title":"Sink"},{"location":"api/1.0.20/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.20/#source","text":"","title":"Source"},{"location":"api/1.0.20/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.21/","text":"API Docs - v1.0.21 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' http-response (Sink) This extension send the response to the http-sync source having the same source.id. user can add any number of response headers for each event dynamically. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml):application/xml, @map(json):application/json, @map(text):plain/text) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-sync',source.id='sampleSourceId',message.id='{{messageId}}',headers=\"'content-type:json','content-length:94'\"@map(type='json' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream:{{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } },0cf708b1-7eae-440b-a93e-e72f801b486a,Content-Length:24#Content-Location:USA}Above event will generate response for the matching source message as below.~Output http event payload{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headersContent-Length:24,Content-Location:'USA',Content-Type:'application/json', Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-sync', source.id='samplesourceid, receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='json @attributes(messageId='trp:messageId',symbol='$.events.event.symbol',price='$.events.event.price',volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows:{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.21"},{"location":"api/1.0.21/#api-docs-v1021","text":"","title":"API Docs - v1.0.21"},{"location":"api/1.0.21/#sink","text":"","title":"Sink"},{"location":"api/1.0.21/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.21/#http-response-sink","text":"This extension send the response to the http-sync source having the same source.id. user can add any number of response headers for each event dynamically. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml):application/xml, @map(json):application/json, @map(text):plain/text) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-sync',source.id='sampleSourceId',message.id='{{messageId}}',headers=\"'content-type:json','content-length:94'\"@map(type='json' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream:{{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } },0cf708b1-7eae-440b-a93e-e72f801b486a,Content-Length:24#Content-Location:USA}Above event will generate response for the matching source message as below.~Output http event payload{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headersContent-Length:24,Content-Location:'USA',Content-Type:'application/json',","title":"http-response (Sink)"},{"location":"api/1.0.21/#source","text":"","title":"Source"},{"location":"api/1.0.21/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.21/#http-request-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-sync', source.id='samplesourceid, receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='json @attributes(messageId='trp:messageId',symbol='$.events.event.symbol',price='$.events.event.price',volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows:{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.22/","text":"API Docs - v1.0.22 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo' http-response (Sink) This extension send the response to the http-sync source having the same source.id. user can add any number of response headers for each event dynamically. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml):application/xml, @map(json):application/json, @map(text):plain/text) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-sync',source.id='sampleSourceId',message.id='{{messageId}}',headers=\"'content-type:json','content-length:94'\"@map(type='json' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream:{{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } },0cf708b1-7eae-440b-a93e-e72f801b486a,Content-Length:24#Content-Location:USA}Above event will generate response for the matching source message as below.~Output http event payload{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headersContent-Length:24,Content-Location:'USA',Content-Type:'application/json', Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-sync', source.id='samplesourceid, receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='json @attributes(messageId='trp:messageId',symbol='$.events.event.symbol',price='$.events.event.price',volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows:{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.22"},{"location":"api/1.0.22/#api-docs-v1022","text":"","title":"API Docs - v1.0.22"},{"location":"api/1.0.22/#sink","text":"","title":"Sink"},{"location":"api/1.0.22/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\",client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20','client.bootstrap.worker.group.size:10'\",client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\" @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.22/#http-response-sink","text":"This extension send the response to the http-sync source having the same source.id. user can add any number of response headers for each event dynamically. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml):application/xml, @map(json):application/json, @map(text):plain/text) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-sync',source.id='sampleSourceId',message.id='{{messageId}}',headers=\"'content-type:json','content-length:94'\"@map(type='json' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream:{{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } },0cf708b1-7eae-440b-a93e-e72f801b486a,Content-Length:24#Content-Location:USA}Above event will generate response for the matching source message as below.~Output http event payload{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headersContent-Length:24,Content-Location:'USA',Content-Type:'application/json',","title":"http-response (Sink)"},{"location":"api/1.0.22/#source","text":"","title":"Source"},{"location":"api/1.0.22/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.22/#http-request-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-sync', source.id='samplesourceid, receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='json @attributes(messageId='trp:messageId',symbol='$.events.event.symbol',price='$.events.event.price',volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows:{\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.24/","text":"API Docs - v1.0.24 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.24"},{"location":"api/1.0.24/#api-docs-v1024","text":"","title":"API Docs - v1.0.24"},{"location":"api/1.0.24/#sink","text":"","title":"Sink"},{"location":"api/1.0.24/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.24/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.24/#source","text":"","title":"Source"},{"location":"api/1.0.24/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.24/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.25/","text":"API Docs - v1.0.25 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.25"},{"location":"api/1.0.25/#api-docs-v1025","text":"","title":"API Docs - v1.0.25"},{"location":"api/1.0.25/#sink","text":"","title":"Sink"},{"location":"api/1.0.25/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.25/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.25/#source","text":"","title":"Source"},{"location":"api/1.0.25/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.25/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.26/","text":"API Docs - v1.0.26 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.26"},{"location":"api/1.0.26/#api-docs-v1026","text":"","title":"API Docs - v1.0.26"},{"location":"api/1.0.26/#sink","text":"","title":"Sink"},{"location":"api/1.0.26/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\". User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.26/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.26/#source","text":"","title":"Source"},{"location":"api/1.0.26/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.26/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.27/","text":"API Docs - v1.0.27 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.27"},{"location":"api/1.0.27/#api-docs-v1027","text":"","title":"API Docs - v1.0.27"},{"location":"api/1.0.27/#sink","text":"","title":"Sink"},{"location":"api/1.0.27/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.27/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.27/#source","text":"","title":"Source"},{"location":"api/1.0.27/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.27/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.28/","text":"API Docs - v1.0.28 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.28"},{"location":"api/1.0.28/#api-docs-v1028","text":"","title":"API Docs - v1.0.28"},{"location":"api/1.0.28/#sink","text":"","title":"Sink"},{"location":"api/1.0.28/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.28/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.28/#source","text":"","title":"Source"},{"location":"api/1.0.28/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.28/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.29/","text":"API Docs - v1.0.29 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.29"},{"location":"api/1.0.29/#api-docs-v1029","text":"","title":"API Docs - v1.0.29"},{"location":"api/1.0.29/#sink","text":"","title":"Sink"},{"location":"api/1.0.29/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.29/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.29/#source","text":"","title":"Source"},{"location":"api/1.0.29/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.29/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.30/","text":"API Docs - v1.0.30 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"1.0.30"},{"location":"api/1.0.30/#api-docs-v1030","text":"","title":"API Docs - v1.0.30"},{"location":"api/1.0.30/#sink","text":"","title":"Sink"},{"location":"api/1.0.30/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.30/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.30/#source","text":"","title":"Source"},{"location":"api/1.0.30/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.30/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.31/","text":"API Docs - v1.0.31 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.31"},{"location":"api/1.0.31/#api-docs-v1031","text":"","title":"API Docs - v1.0.31"},{"location":"api/1.0.31/#sink","text":"","title":"Sink"},{"location":"api/1.0.31/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.31/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.31/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.31/#source","text":"","title":"Source"},{"location":"api/1.0.31/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.31/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.31/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.32/","text":"API Docs - v1.0.32 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.32"},{"location":"api/1.0.32/#api-docs-v1032","text":"","title":"API Docs - v1.0.32"},{"location":"api/1.0.32/#sink","text":"","title":"Sink"},{"location":"api/1.0.32/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.32/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.32/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.32/#source","text":"","title":"Source"},{"location":"api/1.0.32/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.32/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.32/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.33/","text":"API Docs - v1.0.33 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.33"},{"location":"api/1.0.33/#api-docs-v1033","text":"","title":"API Docs - v1.0.33"},{"location":"api/1.0.33/#sink","text":"","title":"Sink"},{"location":"api/1.0.33/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.33/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.33/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.33/#source","text":"","title":"Source"},{"location":"api/1.0.33/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.33/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.33/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.34/","text":"API Docs - v1.0.34 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.34"},{"location":"api/1.0.34/#api-docs-v1034","text":"","title":"API Docs - v1.0.34"},{"location":"api/1.0.34/#sink","text":"","title":"Sink"},{"location":"api/1.0.34/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.34/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.34/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.34/#source","text":"","title":"Source"},{"location":"api/1.0.34/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.34/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.34/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.35/","text":"API Docs - v1.0.35 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.35"},{"location":"api/1.0.35/#api-docs-v1035","text":"","title":"API Docs - v1.0.35"},{"location":"api/1.0.35/#sink","text":"","title":"Sink"},{"location":"api/1.0.35/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.35/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.35/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.35/#source","text":"","title":"Source"},{"location":"api/1.0.35/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.35/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.35/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.36/","text":"API Docs - v1.0.36 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.36"},{"location":"api/1.0.36/#api-docs-v1036","text":"","title":"API Docs - v1.0.36"},{"location":"api/1.0.36/#sink","text":"","title":"Sink"},{"location":"api/1.0.36/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.36/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.36/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.36/#source","text":"","title":"Source"},{"location":"api/1.0.36/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.36/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.36/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.37/","text":"API Docs - v1.0.37 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.37"},{"location":"api/1.0.37/#api-docs-v1037","text":"","title":"API Docs - v1.0.37"},{"location":"api/1.0.37/#sink","text":"","title":"Sink"},{"location":"api/1.0.37/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.37/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.37/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.37/#source","text":"","title":"Source"},{"location":"api/1.0.37/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.37/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.37/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.39/","text":"API Docs - v1.0.39 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.39"},{"location":"api/1.0.39/#api-docs-v1039","text":"","title":"API Docs - v1.0.39"},{"location":"api/1.0.39/#sink","text":"","title":"Sink"},{"location":"api/1.0.39/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.39/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.39/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.39/#source","text":"","title":"Source"},{"location":"api/1.0.39/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.39/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.39/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.4/","text":"API Docs - v1.0.4 Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No System Parameters Name Description Default Value Possible Parameters latency.metrics.enabled Property to enable metrics logs to monitor transport latency for config. true true false server.bootstrap.socket.timeout property to configure specified timeout in milliseconds which server socket will block for this amount of time for http message content to be received. 15 Any integer server.bootstrap.boss.group.size property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer server.bootstrap.worker.group.size property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer default.host The default host of the transport. 0.0.0.0 Any valid host http.port The default port if the default scheme is 'http'. 9763 Any valid port https.port The default port if the default scheme is 'https'. 9443 Any valid port default.protocol The default protocol. http http https https.keystore.file The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file https.keystore.password The default keystore password. wso2carbon String of keystore password https.cert.password The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source configuration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", client.truststore.path=\"<STRING>\", client.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No client.truststore.path The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No client.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes Yes method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes Yes System Parameters Name Description Default Value Possible Parameters latency.metrics.enabled Property to enable metrics logs to monitor transport latency for config. true Any Integer server.bootstrap.socket.timeout Property to configure specified timeout in milliseconds which server socket will block for this amount of time for http message content to be received. 15 Any Integer server.bootstrap.boss.group.size Property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer server.bootstrap.worker.group.size Property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer default.protocol The default protocol. http http https https.truststore.file The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks https.truststore.password The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}', @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"1.0.4"},{"location":"api/1.0.4/#api-docs-v104","text":"","title":"API Docs - v1.0.4"},{"location":"api/1.0.4/#source","text":"","title":"Source"},{"location":"api/1.0.4/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . If required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No System Parameters Name Description Default Value Possible Parameters latency.metrics.enabled Property to enable metrics logs to monitor transport latency for config. true true false server.bootstrap.socket.timeout property to configure specified timeout in milliseconds which server socket will block for this amount of time for http message content to be received. 15 Any integer server.bootstrap.boss.group.size property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer server.bootstrap.worker.group.size property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer default.host The default host of the transport. 0.0.0.0 Any valid host http.port The default port if the default scheme is 'http'. 9763 Any valid port https.port The default port if the default scheme is 'https'. 9443 Any valid port default.protocol The default protocol. http http https https.keystore.file The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file https.keystore.password The default keystore password. wso2carbon String of keystore password https.cert.password The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source configuration performs a default XML input mapping. The expected input is as follows:<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.4/#sink","text":"","title":"Sink"},{"location":"api/1.0.4/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", client.truststore.path=\"<STRING>\", client.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No client.truststore.path The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No client.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as a HTTP request headers. There can be any number of headers concatenated on following format. header1:value1#header2:value2. User can include content-type header if he need to any specific type for payload if not system get the mapping type as the content-Type header (ie. @map(xml):application/xml,@map(json):application/json,@map(text):plain/text ) and if user does not include any mapping type then system gets the 'plain/text' as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes Yes method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes Yes System Parameters Name Description Default Value Possible Parameters latency.metrics.enabled Property to enable metrics logs to monitor transport latency for config. true Any Integer server.bootstrap.socket.timeout Property to configure specified timeout in milliseconds which server socket will block for this amount of time for http message content to be received. 15 Any Integer server.bootstrap.boss.group.size Property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. 4 Any integer server.bootstrap.worker.group.size Property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. 8 Any integer default.protocol The default protocol. http http https https.truststore.file The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks https.truststore.password The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers='{{headers}}', @map(type='xml' , @payload('{{payloadBody}}')))define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream:{<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event></events>,POST,Content-Length:24#Content-Location:USA#Retry-After:120}Above event will generate output as below.~Output http event payload<events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headersContent-Length:24,Content-Location:'USA',Retry-After:120,Content-Type:'application/xml',HTTP_METHOD:'POST',~Output http event propertiesHTTP_METHOD:'POST',HOST:'localhost',PORT:8009PROTOCOL:'http'TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.40/","text":"API Docs - v1.0.40 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. BOOL No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.40"},{"location":"api/1.0.40/#api-docs-v1040","text":"","title":"API Docs - v1.0.40"},{"location":"api/1.0.40/#sink","text":"","title":"Sink"},{"location":"api/1.0.40/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.40/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.40/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.40/#source","text":"","title":"Source"},{"location":"api/1.0.40/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.40/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<STRING>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 STRING Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.40/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. BOOL No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.41/","text":"API Docs - v1.0.41 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. BOOL No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.41"},{"location":"api/1.0.41/#api-docs-v1041","text":"","title":"API Docs - v1.0.41"},{"location":"api/1.0.41/#sink","text":"","title":"Sink"},{"location":"api/1.0.41/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.41/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.41/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.41/#source","text":"","title":"Source"},{"location":"api/1.0.41/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.41/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.41/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' STRING No No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. BOOL No No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.42/","text":"API Docs - v1.0.42 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.42"},{"location":"api/1.0.42/#api-docs-v1042","text":"","title":"API Docs - v1.0.42"},{"location":"api/1.0.42/#sink","text":"","title":"Sink"},{"location":"api/1.0.42/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.42/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.42/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.42/#source","text":"","title":"Source"},{"location":"api/1.0.42/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.42/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.42/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.43/","text":"API Docs - v1.0.43 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.43"},{"location":"api/1.0.43/#api-docs-v1043","text":"","title":"API Docs - v1.0.43"},{"location":"api/1.0.43/#sink","text":"","title":"Sink"},{"location":"api/1.0.43/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.43/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.43/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.43/#source","text":"","title":"Source"},{"location":"api/1.0.43/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.43/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.43/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.44/","text":"API Docs - v1.0.44 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.44"},{"location":"api/1.0.44/#api-docs-v1044","text":"","title":"API Docs - v1.0.44"},{"location":"api/1.0.44/#sink","text":"","title":"Sink"},{"location":"api/1.0.44/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.44/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.44/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.44/#source","text":"","title":"Source"},{"location":"api/1.0.44/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.44/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.44/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.0.45/","text":"API Docs - v1.0.45 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.0.45"},{"location":"api/1.0.45/#api-docs-v1045","text":"","title":"API Docs - v1.0.45"},{"location":"api/1.0.45/#sink","text":"","title":"Sink"},{"location":"api/1.0.45/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.0.45/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.0.45/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.0.45/#source","text":"","title":"Source"},{"location":"api/1.0.45/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.0.45/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.0.45/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.1.0/","text":"API Docs - v1.1.0 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.1.0"},{"location":"api/1.1.0/#api-docs-v110","text":"","title":"API Docs - v1.1.0"},{"location":"api/1.1.0/#sink","text":"","title":"Sink"},{"location":"api/1.1.0/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.1.0/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.1.0/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.1.0/#source","text":"","title":"Source"},{"location":"api/1.1.0/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.1.0/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.1.0/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.1.1/","text":"API Docs - v1.1.1 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.1.1"},{"location":"api/1.1.1/#api-docs-v111","text":"","title":"API Docs - v1.1.1"},{"location":"api/1.1.1/#sink","text":"","title":"Sink"},{"location":"api/1.1.1/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.1.1/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.1.1/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.1.1/#source","text":"","title":"Source"},{"location":"api/1.1.1/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.1.1/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.1.1/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.1.2/","text":"API Docs - v1.1.2 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.1.2"},{"location":"api/1.1.2/#api-docs-v112","text":"","title":"API Docs - v1.1.2"},{"location":"api/1.1.2/#sink","text":"","title":"Sink"},{"location":"api/1.1.2/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.1.2/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.1.2/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.1.2/#source","text":"","title":"Source"},{"location":"api/1.1.2/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.1.2/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.1.2/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.1.3/","text":"API Docs - v1.1.3 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.1.3"},{"location":"api/1.1.3/#api-docs-v113","text":"","title":"API Docs - v1.1.3"},{"location":"api/1.1.3/#sink","text":"","title":"Sink"},{"location":"api/1.1.3/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.1.3/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.1.3/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.1.3/#source","text":"","title":"Source"},{"location":"api/1.1.3/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.1.3/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.1.3/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.1.4/","text":"API Docs - v1.1.4 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.1.4"},{"location":"api/1.1.4/#api-docs-v114","text":"","title":"API Docs - v1.1.4"},{"location":"api/1.1.4/#sink","text":"","title":"Sink"},{"location":"api/1.1.4/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.1.4/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.1.4/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.1.4/#source","text":"","title":"Source"},{"location":"api/1.1.4/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.1.4/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.1.4/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.1.5/","text":"API Docs - v1.1.5 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.1.5"},{"location":"api/1.1.5/#api-docs-v115","text":"","title":"API Docs - v1.1.5"},{"location":"api/1.1.5/#sink","text":"","title":"Sink"},{"location":"api/1.1.5/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.1.5/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.1.5/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.1.5/#source","text":"","title":"Source"},{"location":"api/1.1.5/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.1.5/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.1.5/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.2.0/","text":"API Docs - v1.2.0 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.2.0"},{"location":"api/1.2.0/#api-docs-v120","text":"","title":"API Docs - v1.2.0"},{"location":"api/1.2.0/#sink","text":"","title":"Sink"},{"location":"api/1.2.0/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.2.0/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.2.0/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.2.0/#source","text":"","title":"Source"},{"location":"api/1.2.0/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.2.0/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.2.0/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.2.1/","text":"API Docs - v1.2.1 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.2.1"},{"location":"api/1.2.1/#api-docs-v121","text":"","title":"API Docs - v1.2.1"},{"location":"api/1.2.1/#sink","text":"","title":"Sink"},{"location":"api/1.2.1/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.2.1/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.2.1/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.2.1/#source","text":"","title":"Source"},{"location":"api/1.2.1/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.2.1/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.2.1/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/1.2.2/","text":"API Docs - v1.2.2 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", connection.pool.count=\"<INT>\", max.pool.active.connections=\"<INT>\", min.pool.idle.connections=\"<INT>\", max.pool.idle.connections=\"<INT>\", min.evictable.idle.time=\"<STRING>\", time.between.eviction.runs=\"<STRING>\", max.wait.time=\"<STRING>\", test.on.borrow=\"<BOOL>\", test.while.idle=\"<BOOL>\", exhausted.action=\"<INT>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay This is mapped to TCP_NODELAY socket option which allows the network to bypass Nagle Delays by disabling Nagle's algorithm, and sending the data as soon as it's available . Setting this parameter to 'true' forces a socket to send the data in its buffer, whatever the packet size. true BOOL Yes No client.bootstrap.keepalive This parameter defines whether the tcp connection should remain open for multiple HTTP requests/responses. If this is set to 'false', HTTP connections will be closed after each request. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No connection.pool.count Number of connection pools that need to be created for the particular client. 0 INT Yes No max.pool.active.connections Maximum possible number of active connection per pool for the client. -1 INT Yes No min.pool.idle.connections Minimum allowed number of idle connections that can be existed in a pool of the client. 0 INT Yes No max.pool.idle.connections Maximum number of idle connections that can be existed in a pool of the client. 100 INT Yes No min.evictable.idle.time Minimum amount of time (in milliseconds) a connection may sit idle in the pool before it is eligible for eviction. 300000ms STRING Yes No time.between.eviction.runs Time between two eviction operations (in milliseconds) on the connection pool. 30000ms STRING Yes No max.wait.time The maximum number of milliseconds that the pool will wait (when there are no available connections) for a connection to be returned. 60000 STRING Yes No test.on.borrow The indication of whether objects will be validated before being borrowed from the pool. If the object validation is failed, it will be dropped from the pool, and will attempt to borrow another. true BOOL Yes No test.while.idle The indication of whether objects will be validated by the idle object evictor (if any). If the object validation is failed, it will be dropped from the pool. true BOOL Yes No exhausted.action Action which should be taken when the maximum number of active connections are being used. This action is indicated as an integer. Possible action are as following. 0 - Fail the request when pool is exhausted. 1 - Block the request when pool is exhausted, until a connection returns to the pool. 2 - Grow the connection pool size when it's exhausted. 1 (Block when exhausted) INT Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"1.2.2"},{"location":"api/1.2.2/#api-docs-v122","text":"","title":"API Docs - v1.2.2"},{"location":"api/1.2.2/#sink","text":"","title":"Sink"},{"location":"api/1.2.2/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", connection.pool.count=\"<INT>\", max.pool.active.connections=\"<INT>\", min.pool.idle.connections=\"<INT>\", max.pool.idle.connections=\"<INT>\", min.evictable.idle.time=\"<STRING>\", time.between.eviction.runs=\"<STRING>\", max.wait.time=\"<STRING>\", test.on.borrow=\"<BOOL>\", test.while.idle=\"<BOOL>\", exhausted.action=\"<INT>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay This is mapped to TCP_NODELAY socket option which allows the network to bypass Nagle Delays by disabling Nagle's algorithm, and sending the data as soon as it's available . Setting this parameter to 'true' forces a socket to send the data in its buffer, whatever the packet size. true BOOL Yes No client.bootstrap.keepalive This parameter defines whether the tcp connection should remain open for multiple HTTP requests/responses. If this is set to 'false', HTTP connections will be closed after each request. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No connection.pool.count Number of connection pools that need to be created for the particular client. 0 INT Yes No max.pool.active.connections Maximum possible number of active connection per pool for the client. -1 INT Yes No min.pool.idle.connections Minimum allowed number of idle connections that can be existed in a pool of the client. 0 INT Yes No max.pool.idle.connections Maximum number of idle connections that can be existed in a pool of the client. 100 INT Yes No min.evictable.idle.time Minimum amount of time (in milliseconds) a connection may sit idle in the pool before it is eligible for eviction. 300000ms STRING Yes No time.between.eviction.runs Time between two eviction operations (in milliseconds) on the connection pool. 30000ms STRING Yes No max.wait.time The maximum number of milliseconds that the pool will wait (when there are no available connections) for a connection to be returned. 60000 STRING Yes No test.on.borrow The indication of whether objects will be validated before being borrowed from the pool. If the object validation is failed, it will be dropped from the pool, and will attempt to borrow another. true BOOL Yes No test.while.idle The indication of whether objects will be validated by the idle object evictor (if any). If the object validation is failed, it will be dropped from the pool. true BOOL Yes No exhausted.action Action which should be taken when the maximum number of active connections are being used. This action is indicated as an integer. Possible action are as following. 0 - Fail the request when pool is exhausted. 1 - Block the request when pool is exhausted, until a connection returns to the pool. 2 - Grow the connection pool size when it's exhausted. 1 (Block when exhausted) INT Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/1.2.2/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/1.2.2/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/1.2.2/#source","text":"","title":"Source"},{"location":"api/1.2.2/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/1.2.2/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/1.2.2/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.0/","text":"API Docs - v2.0.0 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.0"},{"location":"api/2.0.0/#api-docs-v200","text":"","title":"API Docs - v2.0.0"},{"location":"api/2.0.0/#sink","text":"","title":"Sink"},{"location":"api/2.0.0/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.0/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.0/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.0/#source","text":"","title":"Source"},{"location":"api/2.0.0/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.0/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.0/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.1/","text":"API Docs - v2.0.1 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.1"},{"location":"api/2.0.1/#api-docs-v201","text":"","title":"API Docs - v2.0.1"},{"location":"api/2.0.1/#sink","text":"","title":"Sink"},{"location":"api/2.0.1/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.1/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.1/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.1/#source","text":"","title":"Source"},{"location":"api/2.0.1/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.1/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.1/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.2/","text":"API Docs - v2.0.2 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.2"},{"location":"api/2.0.2/#api-docs-v202","text":"","title":"API Docs - v2.0.2"},{"location":"api/2.0.2/#sink","text":"","title":"Sink"},{"location":"api/2.0.2/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.2/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.2/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.2/#source","text":"","title":"Source"},{"location":"api/2.0.2/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.2/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.2/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.3/","text":"API Docs - v2.0.3 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.3"},{"location":"api/2.0.3/#api-docs-v203","text":"","title":"API Docs - v2.0.3"},{"location":"api/2.0.3/#sink","text":"","title":"Sink"},{"location":"api/2.0.3/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.3/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.3/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.3/#source","text":"","title":"Source"},{"location":"api/2.0.3/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.3/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.3/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.4/","text":"API Docs - v2.0.4 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.4"},{"location":"api/2.0.4/#api-docs-v204","text":"","title":"API Docs - v2.0.4"},{"location":"api/2.0.4/#sink","text":"","title":"Sink"},{"location":"api/2.0.4/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.4/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.4/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.4/#source","text":"","title":"Source"},{"location":"api/2.0.4/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.4/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.4/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.5/","text":"API Docs - v2.0.5 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.5"},{"location":"api/2.0.5/#api-docs-v205","text":"","title":"API Docs - v2.0.5"},{"location":"api/2.0.5/#sink","text":"","title":"Sink"},{"location":"api/2.0.5/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.5/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.5/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.5/#source","text":"","title":"Source"},{"location":"api/2.0.5/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.5/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.5/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.6/","text":"API Docs - v2.0.6 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.6"},{"location":"api/2.0.6/#api-docs-v206","text":"","title":"API Docs - v2.0.6"},{"location":"api/2.0.6/#sink","text":"","title":"Sink"},{"location":"api/2.0.6/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.6/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.6/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.6/#source","text":"","title":"Source"},{"location":"api/2.0.6/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.6/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.6/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.7/","text":"API Docs - v2.0.7 Sink http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.7"},{"location":"api/2.0.7/#api-docs-v207","text":"","title":"API Docs - v2.0.7"},{"location":"api/2.0.7/#sink","text":"","title":"Sink"},{"location":"api/2.0.7/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.7/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.7/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.7/#source","text":"","title":"Source"},{"location":"api/2.0.7/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.7/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.7/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/2.0.8/","text":"API Docs - v2.0.8 Sink Tested Siddhi Core version: 5.0.0 It could also support other Siddhi Core minor versions. http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", connection.pool.count=\"<INT>\", max.pool.active.connections=\"<INT>\", min.pool.idle.connections=\"<INT>\", max.pool.idle.connections=\"<INT>\", min.evictable.idle.time=\"<STRING>\", time.between.eviction.runs=\"<STRING>\", max.wait.time=\"<STRING>\", test.on.borrow=\"<BOOL>\", test.while.idle=\"<BOOL>\", exhausted.action=\"<INT>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay This is mapped to TCP_NODELAY socket option which allows the network to bypass Nagle Delays by disabling Nagle's algorithm, and sending the data as soon as it's available . Setting this parameter to 'true' forces a socket to send the data in its buffer, whatever the packet size. true BOOL Yes No client.bootstrap.keepalive This parameter defines whether the tcp connection should remain open for multiple HTTP requests/responses. If this is set to 'false', HTTP connections will be closed after each request. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No connection.pool.count Number of connection pools that need to be created for the particular client. 0 INT Yes No max.pool.active.connections Maximum possible number of active connection per pool for the client. -1 INT Yes No min.pool.idle.connections Minimum allowed number of idle connections that can be existed in a pool of the client. 0 INT Yes No max.pool.idle.connections Maximum number of idle connections that can be existed in a pool of the client. 100 INT Yes No min.evictable.idle.time Minimum amount of time (in milliseconds) a connection may sit idle in the pool before it is eligible for eviction. 300000ms STRING Yes No time.between.eviction.runs Time between two eviction operations (in milliseconds) on the connection pool. 30000ms STRING Yes No max.wait.time The maximum number of milliseconds that the pool will wait (when there are no available connections) for a connection to be returned. 60000 STRING Yes No test.on.borrow The indication of whether objects will be validated before being borrowed from the pool. If the object validation is failed, it will be dropped from the pool, and will attempt to borrow another. true BOOL Yes No test.while.idle The indication of whether objects will be validated by the idle object evictor (if any). If the object validation is failed, it will be dropped from the pool. true BOOL Yes No exhausted.action Action which should be taken when the maximum number of active connections are being used. This action is indicated as an integer. Possible action are as following. 0 - Fail the request when pool is exhausted. 1 - Block the request when pool is exhausted, until a connection returns to the pool. 2 - Grow the connection pool size when it's exhausted. 1 (Block when exhausted) INT Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"2.0.8"},{"location":"api/2.0.8/#api-docs-v208","text":"","title":"API Docs - v2.0.8"},{"location":"api/2.0.8/#sink","text":"Tested Siddhi Core version: 5.0.0 It could also support other Siddhi Core minor versions.","title":"Sink"},{"location":"api/2.0.8/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", connection.pool.count=\"<INT>\", max.pool.active.connections=\"<INT>\", min.pool.idle.connections=\"<INT>\", max.pool.idle.connections=\"<INT>\", min.evictable.idle.time=\"<STRING>\", time.between.eviction.runs=\"<STRING>\", max.wait.time=\"<STRING>\", test.on.borrow=\"<BOOL>\", test.while.idle=\"<BOOL>\", exhausted.action=\"<INT>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay This is mapped to TCP_NODELAY socket option which allows the network to bypass Nagle Delays by disabling Nagle's algorithm, and sending the data as soon as it's available . Setting this parameter to 'true' forces a socket to send the data in its buffer, whatever the packet size. true BOOL Yes No client.bootstrap.keepalive This parameter defines whether the tcp connection should remain open for multiple HTTP requests/responses. If this is set to 'false', HTTP connections will be closed after each request. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No connection.pool.count Number of connection pools that need to be created for the particular client. 0 INT Yes No max.pool.active.connections Maximum possible number of active connection per pool for the client. -1 INT Yes No min.pool.idle.connections Minimum allowed number of idle connections that can be existed in a pool of the client. 0 INT Yes No max.pool.idle.connections Maximum number of idle connections that can be existed in a pool of the client. 100 INT Yes No min.evictable.idle.time Minimum amount of time (in milliseconds) a connection may sit idle in the pool before it is eligible for eviction. 300000ms STRING Yes No time.between.eviction.runs Time between two eviction operations (in milliseconds) on the connection pool. 30000ms STRING Yes No max.wait.time The maximum number of milliseconds that the pool will wait (when there are no available connections) for a connection to be returned. 60000 STRING Yes No test.on.borrow The indication of whether objects will be validated before being borrowed from the pool. If the object validation is failed, it will be dropped from the pool, and will attempt to borrow another. true BOOL Yes No test.while.idle The indication of whether objects will be validated by the idle object evictor (if any). If the object validation is failed, it will be dropped from the pool. true BOOL Yes No exhausted.action Action which should be taken when the maximum number of active connections are being used. This action is indicated as an integer. Possible action are as following. 0 - Fail the request when pool is exhausted. 1 - Block the request when pool is exhausted, until a connection returns to the pool. 2 - Grow the connection pool size when it's exhausted. 1 (Block when exhausted) INT Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/2.0.8/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/2.0.8/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/2.0.8/#source","text":"","title":"Source"},{"location":"api/2.0.8/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/2.0.8/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/2.0.8/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"},{"location":"api/latest/","text":"API Docs - v2.0.8 Sink Tested Siddhi Core version: 5.0.0 It could also support other Siddhi Core minor versions. http (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", connection.pool.count=\"<INT>\", max.pool.active.connections=\"<INT>\", min.pool.idle.connections=\"<INT>\", max.pool.idle.connections=\"<INT>\", min.evictable.idle.time=\"<STRING>\", time.between.eviction.runs=\"<STRING>\", max.wait.time=\"<STRING>\", test.on.borrow=\"<BOOL>\", test.while.idle=\"<BOOL>\", exhausted.action=\"<INT>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay This is mapped to TCP_NODELAY socket option which allows the network to bypass Nagle Delays by disabling Nagle's algorithm, and sending the data as soon as it's available . Setting this parameter to 'true' forces a socket to send the data in its buffer, whatever the packet size. true BOOL Yes No client.bootstrap.keepalive This parameter defines whether the tcp connection should remain open for multiple HTTP requests/responses. If this is set to 'false', HTTP connections will be closed after each request. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No connection.pool.count Number of connection pools that need to be created for the particular client. 0 INT Yes No max.pool.active.connections Maximum possible number of active connection per pool for the client. -1 INT Yes No min.pool.idle.connections Minimum allowed number of idle connections that can be existed in a pool of the client. 0 INT Yes No max.pool.idle.connections Maximum number of idle connections that can be existed in a pool of the client. 100 INT Yes No min.evictable.idle.time Minimum amount of time (in milliseconds) a connection may sit idle in the pool before it is eligible for eviction. 300000ms STRING Yes No time.between.eviction.runs Time between two eviction operations (in milliseconds) on the connection pool. 30000ms STRING Yes No max.wait.time The maximum number of milliseconds that the pool will wait (when there are no available connections) for a connection to be returned. 60000 STRING Yes No test.on.borrow The indication of whether objects will be validated before being borrowed from the pool. If the object validation is failed, it will be dropped from the pool, and will attempt to borrow another. true BOOL Yes No test.while.idle The indication of whether objects will be validated by the idle object evictor (if any). If the object validation is failed, it will be dropped from the pool. true BOOL Yes No exhausted.action Action which should be taken when the maximum number of active connections are being used. This action is indicated as an integer. Possible action are as following. 0 - Fail the request when pool is exhausted. 1 - Block the request when pool is exhausted, until a connection returns to the pool. 2 - Grow the connection pool size when it's exhausted. 1 (Block when exhausted) INT Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo' http-request (Sink) This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format. http-response (Sink) HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json' Source http (Source) The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-request (Source) The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header. http-response (Source) The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"latest"},{"location":"api/latest/#api-docs-v208","text":"","title":"API Docs - v2.0.8"},{"location":"api/latest/#sink","text":"Tested Siddhi Core version: 5.0.0 It could also support other Siddhi Core minor versions.","title":"Sink"},{"location":"api/latest/#http-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded Syntax @sink(type=\"http\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", connection.pool.count=\"<INT>\", max.pool.active.connections=\"<INT>\", min.pool.idle.connections=\"<INT>\", max.pool.idle.connections=\"<INT>\", min.evictable.idle.time=\"<STRING>\", time.between.eviction.runs=\"<STRING>\", max.wait.time=\"<STRING>\", test.on.borrow=\"<BOOL>\", test.while.idle=\"<BOOL>\", exhausted.action=\"<INT>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", token.url=\"<STRING>\", hostname.verification.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url.e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint STRING No No basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled This parameter is used to disable/enable chunked transfer encoding false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay This is mapped to TCP_NODELAY socket option which allows the network to bypass Nagle Delays by disabling Nagle's algorithm, and sending the data as soon as it's available . Setting this parameter to 'true' forces a socket to send the data in its buffer, whatever the packet size. true BOOL Yes No client.bootstrap.keepalive This parameter defines whether the tcp connection should remain open for multiple HTTP requests/responses. If this is set to 'false', HTTP connections will be closed after each request. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No connection.pool.count Number of connection pools that need to be created for the particular client. 0 INT Yes No max.pool.active.connections Maximum possible number of active connection per pool for the client. -1 INT Yes No min.pool.idle.connections Minimum allowed number of idle connections that can be existed in a pool of the client. 0 INT Yes No max.pool.idle.connections Maximum number of idle connections that can be existed in a pool of the client. 100 INT Yes No min.evictable.idle.time Minimum amount of time (in milliseconds) a connection may sit idle in the pool before it is eligible for eviction. 300000ms STRING Yes No time.between.eviction.runs Time between two eviction operations (in milliseconds) on the connection pool. 30000ms STRING Yes No max.wait.time The maximum number of milliseconds that the pool will wait (when there are no available connections) for a connection to be returned. 60000 STRING Yes No test.on.borrow The indication of whether objects will be validated before being borrowed from the pool. If the object validation is failed, it will be dropped from the pool, and will attempt to borrow another. true BOOL Yes No test.while.idle The indication of whether objects will be validated by the idle object evictor (if any). If the object validation is failed, it will be dropped from the pool. true BOOL Yes No exhausted.action Action which should be taken when the maximum number of active connections are being used. This action is indicated as an integer. Possible action are as following. 0 - Fail the request when pool is exhausted. 1 - Block the request when pool is exhausted, until a connection returns to the pool. 2 - Grow the connection pool size when it's exhausted. 1 (Block when exhausted) INT Yes No oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests NONE STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests NONE STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No token.url token url for generate a new access token. It is only applicable for for Oauth requests STRING Yes No hostname.verification.enabled To enable hostname verification true BOOL Yes No System Parameters Name Description Default Value Possible Parameters clientBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer clientBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer clientBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer trustStoreLocation The default truststore file path. ${carbon.home}/resources/security/client-truststore.jks Path to client-truststore.jks trustStorePassword The default truststore password. wso2carbon Truststore password Examples EXAMPLE 1 @sink(type='http',publisher.url='http://localhost:8009/foo', method='{{method}}',headers=\"'content-type:xml','content-length:94'\", client.bootstrap.configuration=\"'client.bootstrap.socket.timeout:20', 'client.bootstrap.worker.group.size:10'\", client.pool.configuration=\"'client.connection.pool.count:10','client.max.active.connections.per.pool:1'\", @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); If it is xml mapping expected input should be in following format for FooStream: { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, POST, Content-Length:24#Content-Location:USA#Retry-After:120 } Above event will generate output as below. ~Output http event payload <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> ~Output http event headers Content-Length:24, Content-Location:'USA', Retry-After:120, Content-Type:'application/xml', HTTP_METHOD:'POST', ~Output http event properties HTTP_METHOD:'POST', HOST:'localhost', PORT:8009, PROTOCOL:'http', TO:'/foo'","title":"http (Sink)"},{"location":"api/latest/#http-request-sink","text":"This extension publish the HTTP events in any HTTP method POST, GET, PUT, DELETE via HTTP or https protocols. As the additional features this component can provide basic authentication as well as user can publish events using custom client truststore files when publishing events via https protocol. And also user can add any number of headers including HTTP_METHOD header for each event dynamically. Following content types will be set by default according to the type of sink mapper used. You can override them by setting the new content types in headers. - TEXT : text/plain - XML : application/xml - JSON : application/json - KEYVALUE : application/x-www-form-urlencoded HTTP request sink is correlated with the The HTTP reponse source, through a unique sink.id .It sends the request to the defined url and the response is received by the response source which has the same 'sink.id'. Syntax @sink(type=\"http-request\", publisher.url=\"<STRING>\", basic.auth.username=\"<STRING>\", basic.auth.password=\"<STRING>\", https.truststore.file=\"<STRING>\", https.truststore.password=\"<STRING>\", headers=\"<STRING>\", method=\"<STRING>\", socket.idle.timeout=\"<INT>\", chunk.disabled=\"<BOOL>\", ssl.protocol=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", client.enable.session.creation=\"<STRING>\", follow.redirect=\"<BOOL>\", max.redirect.count=\"<INT>\", tls.store.type=\"<STRING>\", proxy.host=\"<STRING>\", proxy.port=\"<STRING>\", proxy.username=\"<STRING>\", proxy.password=\"<STRING>\", client.bootstrap.configuration=\"<STRING>\", client.bootstrap.nodelay=\"<BOOL>\", client.bootstrap.keepalive=\"<BOOL>\", client.bootstrap.sendbuffersize=\"<INT>\", client.bootstrap.recievebuffersize=\"<INT>\", client.bootstrap.connect.timeout=\"<INT>\", client.bootstrap.socket.reuse=\"<BOOL>\", client.bootstrap.socket.timeout=\"<STRING>\", client.threadpool.configurations=\"<STRING>\", client.connection.pool.count=\"<INT>\", client.max.active.connections.per.pool=\"<INT>\", client.min.idle.connections.per.pool=\"<INT>\", client.max.idle.connections.per.pool=\"<INT>\", client.min.eviction.idle.time=\"<STRING>\", sender.thread.count=\"<STRING>\", event.group.executor.thread.size=\"<STRING>\", max.wait.for.client.connection.pool=\"<STRING>\", sink.id=\"<STRING>\", downloading.enabled=\"<BOOL>\", download.path=\"<STRING>\", oauth.username=\"<STRING>\", oauth.password=\"<STRING>\", consumer.key=\"<STRING>\", consumer.secret=\"<STRING>\", refresh.token=\"<STRING>\", blocking.io=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic publisher.url The URL to which the outgoing events should be published via HTTP. This is a mandatory parameter and if this is not specified, an error is logged in the CLI. If user wants to enable SSL for the events, use https instead of http in the publisher.url. e.g., http://localhost:8080/endpoint , https://localhost:8080/endpoint This can be used as a dynamic parameter as well. STRING No Yes basic.auth.username The username to be included in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No basic.auth.password The password to include in the authentication header of the basic authentication enabled events. It is required to specify both username and password to enable basic authentication. If one of the parameter is not given by user then an error is logged in the CLI. STRING Yes No https.truststore.file The file path to the location of the truststore of the client that sends the HTTP events through 'https' protocol. A custom client-truststore can be specified if required. ${carbon.home}/resources/security/client-truststore.jks STRING Yes No https.truststore.password The password for the client-truststore. A custom password can be specified if required. If no custom password is specified and the protocol of URL is 'https' then, the system uses default password. wso2carbon STRING Yes No headers The headers that should be included as HTTP request headers. There can be any number of headers concatenated in following format. \"'header1:value1','header2:value2'\". User can include Content-Type header if he needs to use a specific content-type for the payload. Or else, system decides the Content-Type by considering the type of sink mapper, in following way. - @map(xml):application/xml - @map(json):application/json - @map(text):plain/text ) - if user does not include any mapping type then the system gets 'plain/text' as default Content-Type header. Note that providing content-length as a header is not supported. The size of the payload will be automatically calculated and included in the content-length header. STRING Yes No method For HTTP events, HTTP_METHOD header should be included as a request header. If the parameter is null then system uses 'POST' as a default header. POST STRING Yes No socket.idle.timeout Socket timeout value in millisecond 6000 INT Yes No chunk.disabled port: Port number of the remote service false BOOL Yes No ssl.protocol The SSL protocol version TLS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No client.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No follow.redirect Redirect related enabled. true BOOL Yes No max.redirect.count Maximum redirect count. 5 INT Yes No tls.store.type TLS store type to be used. JKS STRING Yes No proxy.host Proxy server host null STRING Yes No proxy.port Proxy server port null STRING Yes No proxy.username Proxy server username null STRING Yes No proxy.password Proxy server password null STRING Yes No client.bootstrap.configuration Client bootsrap configurations. Expected format of these parameters is as follows: \"'client.bootstrap.nodelay:xxx','client.bootstrap.keepalive:xxx'\" TODO STRING Yes No client.bootstrap.nodelay Http client no delay. true BOOL Yes No client.bootstrap.keepalive Http client keep alive. true BOOL Yes No client.bootstrap.sendbuffersize Http client send buffer size. 1048576 INT Yes No client.bootstrap.recievebuffersize Http client receive buffer size. 1048576 INT Yes No client.bootstrap.connect.timeout Http client connection timeout. 15000 INT Yes No client.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No client.bootstrap.socket.timeout Http client socket timeout. 15 STRING Yes No client.threadpool.configurations Thread pool configuration. Expected format of these parameters is as follows: \"'client.connection.pool.count:xxx','client.max.active.connections.per.pool:xxx'\" TODO STRING Yes No client.connection.pool.count Connection pool count. 0 INT Yes No client.max.active.connections.per.pool Active connections per pool. -1 INT Yes No client.min.idle.connections.per.pool Minimum ideal connection per pool. 0 INT Yes No client.max.idle.connections.per.pool Maximum ideal connection per pool. 100 INT Yes No client.min.eviction.idle.time Minimum eviction idle time. 5 * 60 * 1000 STRING Yes No sender.thread.count Http sender thread count. 20 STRING Yes No event.group.executor.thread.size Event group executor thread size. 15 STRING Yes No max.wait.for.client.connection.pool Maximum wait for client connection pool. 60000 STRING Yes No sink.id Identifier of the sink. This is used to co-relate with the corresponding http-response source which needs to process the repose for the request sent by this sink. STRING No No downloading.enabled If this is set to 'true' then the response received by the response source will be written to a file. If downloading is enabled, the download.path parameter is mandatory. false BOOL Yes No download.path If downloading is enabled, the path of the file which is going to be downloaded should be specified using 'download.path' parameter. This should be an absolute path including the file name. null STRING Yes Yes oauth.username The username to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No oauth.password The password to be included in the authentication header of the oauth authentication enabled events. It is required to specify both username and password to enable oauth authentication. If one of the parameter is not given by user then an error is logged in the CLI. It is only applicable for for Oauth requests STRING Yes No consumer.key consumer key for the Http request. It is only applicable for for Oauth requests STRING Yes No consumer.secret consumer secret for the Http request. It is only applicable for for Oauth requests STRING Yes No refresh.token refresh token for the Http request. It is only applicable for for Oauth requests STRING Yes No blocking.io If this is set to 'true', after sending a request, http-request sink waits until it receives the response for that request, before sending any other request. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', sink.id='foo', publisher.url='http://localhost:8009/foo', @map(type='xml', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, method string, headers string); @source(type='http-response', sink.id='foo', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='foo', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, the payload body for 'FooStream' will be in following format. { <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events>, This message will sent as the body of a POST request with the content-type 'application/xml' to the endpoint defined as the 'publisher.url' and in order to process the responses for these requests, there should be a source of type 'http-response' defined with the same sink id 'foo' in the siddhi app. The responses with 2xx status codes will be received by the http-response source which has the http.status.code defined by the regex '2\\\\d+'. If the response has a 4xx status code, it will be received by the http-response source which has the http.status.code defined by the regex '4\\\\d+'. EXAMPLE 2 define stream FooStream (name String, id int, headers String, downloadPath string); @sink(type='http-request', downloading.enabled='true', download.path='{{downloadPath}}',publisher.url='http://localhost:8005/files', method='GET', headers='{{headers}}',sink.id='download-sink', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response', sink.id='download-sink', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(headers='trp:headers', fileName='A[1]'))) define stream responseStream2xx(fileName string, headers string); @source(type='http-response', sink.id='download-sink', http.status.code='4\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(errorMsg='A[1]'))) define stream responseStream4xx(errorMsg string); In above example, http-request sink will send a GET request to the publisher url and the requested file will be received as the response by a corresponding http-response source. If the http status code of the response is a successful one (2xx), it will be received by the http-response source which has the http.status.code '2\\\\d+' and downloaded as a local file. Then the event received to the responseStream2xx will have the headers included in the request and the downloaded file name. If the http status code of the response is a 4xx code, it will be received by the http-response source which has the http.status.code '4\\\\d+'. Then the event received to the responseStream4xx will have the response message body in text format.","title":"http-request (Sink)"},{"location":"api/latest/#http-response-sink","text":"HTTP response sink is correlated with the The HTTP request source, through a unique source.id , and it send a response to the HTTP request source having the same source.id . The response message can be formatted in text , XML or JSON and can be sent with appropriate headers. Syntax @sink(type=\"http-response\", source.id=\"<STRING>\", message.id=\"<STRING>\", headers=\"<STRING>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic source.id Identifier of the source. STRING No No message.id Identifier of the message. STRING No Yes headers The headers that should be included as HTTP response headers. There can be any number of headers concatenated on following format. \"'header1:value1','header2:value2'\" User can include content-type header if he/she need to have any specific type for payload. If not system get the mapping type as the content-Type header (ie. @map(xml) : application/xml , @map(json) : application/json , @map(text) : plain/text ) and if user does not include any mapping type then system gets the plain/text as default Content-Type header. If user does not include Content-Length header then system calculate the bytes size of payload and include it as content-length header. STRING Yes No Examples EXAMPLE 1 @sink(type='http-response', source.id='sampleSourceId', message.id='{{messageId}}', headers=\"'content-type:json','content-length:94'\"@map(type='json', @payload('{{payloadBody}}'))) define stream FooStream (payloadBody String, messageId string, headers string); If it is json mapping expected input should be in following format for FooStream: { {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } }, 0cf708b1-7eae-440b-a93e-e72f801b486a, Content-Length:24#Content-Location:USA } Above event will generate response for the matching source message as below. ~Output http event payload {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } ~Output http event headers Content-Length:24, Content-Location:'USA', Content-Type:'application/json'","title":"http-response (Sink)"},{"location":"api/latest/#source","text":"","title":"Source"},{"location":"api/latest/#http-source","text":"The HTTP source receives POST requests via HTTP or HTTPS in format such as text , XML and JSON . In WSO2 SP, if required, you can enable basic authentication to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http\", receiver.url=\"<STRING>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No basic.auth.enabled This works only in WSO2 SP. If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password Examples EXAMPLE 1 @source(type='http', receiver.url='http://localhost:9055/endpoints/RecPro', socketIdleTimeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\",request.size.validation.configuration=\"request.size.validation:true\",server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\" @map(type='xml')) define stream FooStream (symbol string, price float, volume long); Above source listenerConfiguration performs a default XML input mapping. The expected input is as follows: <events> <event> <symbol>WSO2</symbol> <price>55.6</price> <volume>100</volume> </event> </events> If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http (Source)"},{"location":"api/latest/#http-request-source","text":"The HTTP request is correlated with the HTTP response sink, through a unique source.id , and for each POST requests it receives via HTTP or HTTPS in format such as text , XML and JSON it sends the response via the HTTP response sink. The individual request and response messages are correlated at the sink using the message.id of the events. If required, you can enable basic authentication at the source to ensure that events are received only from users who are authorized to access the service. Syntax @source(type=\"http-request\", receiver.url=\"<STRING>\", source.id=\"<STRING>\", connection.timeout=\"<INT>\", basic.auth.enabled=\"<STRING>\", worker.count=\"<INT>\", socket.idle.timeout=\"<INT>\", ssl.verify.client=\"<STRING>\", ssl.protocol=\"<STRING>\", tls.store.type=\"<STRING>\", parameters=\"<STRING>\", ciphers=\"<STRING>\", ssl.enabled.protocols=\"<STRING>\", server.enable.session.creation=\"<STRING>\", server.supported.snimatchers=\"<STRING>\", server.suported.server.names=\"<STRING>\", request.size.validation.configuration=\"<STRING>\", request.size.validation=\"<STRING>\", request.size.validation.maximum.value=\"<STRING>\", request.size.validation.reject.status.code=\"<STRING>\", request.size.validation.reject.message=\"<STRING>\", request.size.validation.reject.message.content.type=\"<STRING>\", header.size.validation=\"<STRING>\", header.validation.maximum.request.line=\"<STRING>\", header.validation.maximum.size=\"<STRING>\", header.validation.maximum.chunk.size=\"<STRING>\", header.validation.reject.status.code=\"<STRING>\", header.validation.reject.message=\"<STRING>\", header.validation.reject.message.content.type=\"<STRING>\", server.bootstrap.configuration=\"<OBJECT>\", server.bootstrap.nodelay=\"<BOOL>\", server.bootstrap.keepalive=\"<BOOL>\", server.bootstrap.sendbuffersize=\"<INT>\", server.bootstrap.recievebuffersize=\"<INT>\", server.bootstrap.connect.timeout=\"<INT>\", server.bootstrap.socket.reuse=\"<BOOL>\", server.bootstrap.socket.timeout=\"<BOOL>\", server.bootstrap.socket.backlog=\"<BOOL>\", trace.log.enabled=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic receiver.url The URL to which the events should be received. User can provide any valid url and if the url is not provided the system will use the following format http://0.0.0.0:9763/<appNAme>/<streamName> If the user want to use SSL the url should be given in following format https://localhost:8080/<streamName> http://0.0.0.0:9763/ / STRING Yes No source.id Identifier need to map the source to sink. STRING No No connection.timeout Connection timeout in milliseconds. If the mapped http-response sink does not get a correlated message, after this timeout value, a timeout response is sent 120000 INT Yes No basic.auth.enabled If this is set to true , basic authentication is enabled for incoming events, and the credentials with which each event is sent are verified to ensure that the user is authorized to access the service. If basic authentication fails, the event is not authenticated and an authentication error is logged in the CLI. By default this values 'false' false STRING Yes No worker.count The number of active worker threads to serve the incoming events. The value is 1 by default. This will ensure that the events are directed to the event stream in the same order in which they arrive. By increasing this value the performance might increase at the cost of loosing event ordering. 1 INT Yes No socket.idle.timeout Idle timeout for HTTP connection. 120000 INT Yes No ssl.verify.client The type of client certificate verification. null STRING Yes No ssl.protocol ssl/tls related options TLS STRING Yes No tls.store.type TLS store type. JKS STRING Yes No parameters Parameters other than basics such as ciphers,sslEnabledProtocols,client.enable.session.creation. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null STRING Yes No ciphers List of ciphers to be used. This parameter should include under parameters Ex: 'ciphers:TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256' null STRING Yes No ssl.enabled.protocols SSL/TLS protocols to be enabled. This parameter should be in camel case format(sslEnabledProtocols) under parameters. Ex 'sslEnabledProtocols:true' null STRING Yes No server.enable.session.creation Enable HTTP session creation.This parameter should include under parameters Ex: 'client.enable.session.creation:true' null STRING Yes No server.supported.snimatchers Http SNIMatcher to be added. This parameter should include under parameters Ex: 'server.supported.snimatchers:SNIMatcher' null STRING Yes No server.suported.server.names Http supported servers. This parameter should include under parameters Ex: 'server.suported.server.names:server' null STRING Yes No request.size.validation.configuration Parameters that responsible for validating the http request and request headers. Expected format of these parameters is as follows: \"'request.size.validation:xxx','request.size.validation.maximum.value:xxx'\" null STRING Yes No request.size.validation To enable the request size validation. false STRING Yes No request.size.validation.maximum.value If request size is validated then maximum size. Integer.MAX_VALUE STRING Yes No request.size.validation.reject.status.code If request is exceed maximum size and request.size.validation is enabled then status code to be send as response. 401 STRING Yes No request.size.validation.reject.message If request is exceed maximum size and request.size.validation is enabled then status message to be send as response. Message is bigger than the valid size STRING Yes No request.size.validation.reject.message.content.type If request is exceed maximum size and request.size.validation is enabled then content type to be send as response. plain/text STRING Yes No header.size.validation To enable the header size validation. false STRING Yes No header.validation.maximum.request.line If header header validation is enabled then the maximum request line. 4096 STRING Yes No header.validation.maximum.size If header header validation is enabled then the maximum expected header size. 8192 STRING Yes No header.validation.maximum.chunk.size If header header validation is enabled then the maximum expected chunk size. 8192 STRING Yes No header.validation.reject.status.code 401 If header is exceed maximum size and header.size.validation is enabled then status code to be send as response. STRING Yes No header.validation.reject.message If header is exceed maximum size and header.size.validation is enabled then message to be send as response. Message header is bigger than the valid size STRING Yes No header.validation.reject.message.content.type If header is exceed maximum size and header.size.validation is enabled then content type to be send as response. plain/text STRING Yes No server.bootstrap.configuration Parameters that for bootstrap configurations of the server. Expected format of these parameters is as follows: \"'ciphers:xxx','sslEnabledProtocols,client.enable:xxx'\" null OBJECT Yes No server.bootstrap.nodelay Http server no delay. true BOOL Yes No server.bootstrap.keepalive Http server keep alive. true BOOL Yes No server.bootstrap.sendbuffersize Http server send buffer size. 1048576 INT Yes No server.bootstrap.recievebuffersize Http server receive buffer size. 1048576 INT Yes No server.bootstrap.connect.timeout Http server connection timeout. 15000 INT Yes No server.bootstrap.socket.reuse To enable http socket reuse. false BOOL Yes No server.bootstrap.socket.timeout Http server socket timeout. 15 BOOL Yes No server.bootstrap.socket.backlog THttp server socket backlog. 100 BOOL Yes No trace.log.enabled Http traffic monitoring. false BOOL Yes No System Parameters Name Description Default Value Possible Parameters serverBootstrapBossGroupSize property to configure number of boss threads, which accepts incoming connections until the ports are unbound. Once connection accepts successfully, boss thread passes the accepted channel to one of the worker threads. Number of available processors Any integer serverBootstrapWorkerGroupSize property to configure number of worker threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer serverBootstrapClientGroupSize property to configure number of client threads, which performs non blocking read and write for one or more channels in non-blocking mode. (Number of available processors) 2 Any integer defaultHost The default host of the transport. 0.0.0.0 Any valid host defaultHttpPort The default port if the default scheme is 'http'. 8280 Any valid port defaultHttpsPort The default port if the default scheme is 'https'. 8243 Any valid port defaultScheme The default protocol. http http https keyStoreLocation The default keystore file path. ${carbon.home}/resources/security/wso2carbon.jks Path to wso2carbon.jks file keyStorePassword The default keystore password. wso2carbon String of keystore password certPassword The default cert password. wso2carbon String of cert password Examples EXAMPLE 1 @source(type='http-request', source.id='sampleSourceId, receiver.url='http://localhost:9055/endpoints/RecPro', connection.timeout='150000', parameters=\"'ciphers : TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256', 'sslEnabledProtocols:TLSv1.1,TLSv1.2'\", request.size.validation.configuration=\"request.size.validation:true\", server.bootstrap.configuration=\"server.bootstrap.socket.timeout:25\", @map(type='json, @attributes(messageId='trp:messageId', symbol='$.events.event.symbol', price='$.events.event.price', volume='$.events.event.volume'))) define stream FooStream (messageId string, symbol string, price float, volume long); The expected input is as follows: {\"events\": {\"event\": \"symbol\":WSO2, \"price\":55.6, \"volume\":100, } } If basic authentication is enabled via the basic.auth.enabled='true setting, each input event is also expected to contain the Authorization:'Basic encodeBase64(username:Password)' header.","title":"http-request (Source)"},{"location":"api/latest/#http-response-source","text":"The http-response source co-relates with http-request sink with the parameter 'sink.id'. This receives responses for the requests sent by the http-request sink which has the same sink id. Response messages can be in formats such as TEXT, JSON and XML. In order to handle the responses with different http status codes, user is allowed to defined the acceptable response source code using the parameter 'http.status.code' Syntax @source(type=\"http-response\", sink.id=\"<STRING>\", http.status.code=\"<STRING>\", allow.streaming.responses=\"<BOOL>\", @map(...))) QUERY PARAMETERS Name Description Default Value Possible Data Types Optional Dynamic sink.id This parameter is used to map the http-response source to a http-request sink. Then this source will accepts the response messages for the requests sent by corresponding http-request sink. STRING No No http.status.code Acceptable http status code for the responses. This can be a complete string or a regex. Only the responses with matching status codes to the defined value, will be received by the http-response source. Eg: 'http.status.code = '200', http.status.code = '2\\d+'' 200 STRING Yes No allow.streaming.responses If responses can be received multiple times for a single request, this option should be enabled. If this is not enabled, for every request, response will be extracted only once. false BOOL Yes No Examples EXAMPLE 1 @sink(type='http-request', downloading.enabled='true', publisher.url='http://localhost:8005/registry/employee', method='POST', headers='{{headers}}',sink.id='employee-info', @map(type='json')) define stream BarStream (name String, id int, headers String, downloadPath string); @source(type='http-response' , sink.id='employee-info', http.status.code='2\\\\d+', @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream2xx(message string);@source(type='http-response' , sink.id='employee-info', http.status.code='4\\\\d+' , @map(type='text', regex.A='((.|\\n)*)', @attributes(message='A[1]'))) define stream responseStream4xx(message string); In above example, the defined http-request sink will send a POST requests to the endpoint defined by 'publisher.url'. Then for those requests, the source with the response code '2\\\\d+' and sink.id 'employee-info' will receive the responses with 2xx status codes. The http-response source which has 'employee-info' as the 'sink.id' and '4\\\\d+' as the http.response.code will receive all the responses with 4xx status codes. . Then the body of the response message will be extracted using text mapper and converted into siddhi events. .","title":"http-response (Source)"}]}